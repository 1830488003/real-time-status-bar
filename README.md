# SillyTavern 实时状态栏扩展 (Real-Time Status Bar)

[![版本](https://img.shields.io/badge/version-2.0.0-blue.svg)](manifest.json)
[![许可证](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)

一个为 [SillyTavern](https://github.com/SillyTavern/SillyTavern) 设计的动态扩展，旨在通过AI实时分析对话，并在聊天界面中生成一个完全可定制的、可视化的角色状态栏。

---

## 核心功能

-   **🤖 实时生成**: 在AI回复后，自动分析最新的对话内容，并调用AI生成一个描述角色当前状态的HTML代码块。
-   **✨ 动态注入**: 将AI生成的HTML无缝注入到聊天界面中，作为一条可视化的状态更新，对用户可见，但对AI的后续输入完全透明。
-   **🔧 高度可配置**:
    -   **自定义AI**: 支持任何与OpenAI兼容的API（如SillyTavern extras, LM Studio, Oobabooga等），也支持使用SillyTavern内置的AI。
    -   **自定义需求**: 用户可以详细描述他们想要的状态栏的具体内容和风格，AI将根据这些需求进行创作。
    -   **上下文感知**: 可选择性地读取当前激活的世界书条目，为AI提供更丰富的背景信息。
-   **🔄 自动版本检查**: 扩展会自动检查GitHub仓库中的新版本，并提供一键更新功能，让您始终保持最新。

## 演示

*（一个展示状态栏在聊天中动态生成和显示的GIF或截图）*

![演示截图](https://user-images.githubusercontent.com/your-id/your-image.png)

---

## 安装指南

### 方法一：通过SillyTavern扩展安装器 (推荐)

1.  在SillyTavern主界面，进入 **扩展 (Extensions)** 菜单。
2.  在 **下载扩展 (Download Extension)** 标签页中，粘贴本仓库的URL：
    ```
    https://github.com/1830488003/real-time-status-bar
    ```
3.  点击下载并等待安装完成。

### 方法二：手动安装

1.  点击本仓库页面右上角的 **Code** -> **Download ZIP**。
2.  解压下载的ZIP文件。
3.  将解压后的 `real-time-status-bar` 文件夹，完整地移动到您的SillyTavern安装目录下的 `public/scripts/extensions/third-party/` 文件夹中。
4.  重新启动SillyTavern。

---

## 使用说明

1.  **打开设置**: 安装并启用扩展后，在 **扩展 (Extensions)** 菜单中找到“实时状态栏”，点击齿轮图标⚙️进入设置面板。

2.  **基础设置**:
    -   **启用插件**: 勾选此项以激活插件。
    -   **状态栏要求**: 在此文本框中，详细描述你希望AI生成的状态栏是什么样子。例如，你可以指定包含哪些信息（HP, MP, 情绪, 装备），以及它的设计风格（科幻、奇幻、简约等）。这里已经提供了一个高质量的默认范本。
    -   **读取世界书**: 如果希望AI在生成状态栏时能参考世界书的内容，请勾选此项。

3.  **AI配置**:
    -   **AI源**:
        -   **酒馆AI**: 使用SillyTavern当前配置的AI。
        -   **自定义AI**: 连接到您自己的OpenAI兼容API。
    -   如果选择“自定义AI”，请填入您的 **API URL**, **API Key** (如果需要)，然后点击 **加载模型列表** 并选择一个模型，最后点击 **保存自定义API**。

4.  **开始使用**:
    -   正常进行对话。每当AI生成一条新的回复后，插件会自动触发，在下方生成一个可视化的状态栏。

## 版本历史

详细的版本更新日志请参阅项目内的 `实时状态栏项目文档.txt` 文件。

-   **v2.0.0**: 新增自动更新检查功能，并在设置页面添加作者和联系信息。
-   **v1.8.0**: 新增内置高质量默认提示词功能，改善初次使用体验。
-   **v1.7.0**: 优化提示词逻辑，强制AI优先遵循用户的定制化需求。
-   **v1.6.0**: 修复了AI生成的可交互UI无法点击的问题，采用了更健壮的JS实现模式。
-   **v1.5.0**: 根据用户最终指示，架构回归纯静态HTML展示，放弃所有交互功能以确保稳定性。
-   **v1.2.0**: 关键修复，使插件能够正确响应角色切换事件。
-   **v1.1.0**: 架构最终定型，采用AI生成自包含可交互HTML的模式。
-   **v1.0.0**: 重大重构，将系统提示词从JS代码中分离到外部`.txt`文件，彻底解决解析错误。

## 贡献

欢迎通过提交 **Issues** 来报告BUG或提出功能建议。
如果您想直接贡献代码，也欢迎提交 **Pull Requests**。

## 许可证

本项目采用 [MIT](LICENSE) 许可证。
